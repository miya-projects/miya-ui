<div nz-row style="margin-bottom: 15px;">
  <div nz-col [nzSpan]="6">
    <div>
      <button (click)="add()" nz-button nzType="primary" acl="sys:dict:edit">新建数据项</button>
    </div>
  </div>
  <div nz-col [nzSpan]="2" [nzOffset]="4">
    <nz-tag style="cursor: pointer;" (click)="copy(code)" title="点击复制">
      {{ code }}
    </nz-tag>
  </div>
  <div nz-col [nzSpan]="6" [nzOffset]="6">
    <div>
      <button (click)="onDelete.emit(this.id)" nz-button nzType="primary" nzDanger acl="sys:dict:delete">删除字典</button>
    </div>
  </div>
</div>

<st #st [data]="data" [columns]="columns"
    [pi]="pi" [ps]="ps" [total]="total" (change)="change($event)" [page]="{front: false}">
  <ng-template st-row="nameTpl" let-item let-index="index">
    <div nz-col [nzSpan]="6">
      <input *ngIf="item._edit" nz-input [(ngModel)]="item._label" />
      <ng-container *ngIf="!item._edit">{{ item.label }}</ng-container>
    </div>
  </ng-template>
  <ng-template st-row="valueTpl" let-item let-index="index" let-column="valueTpl">
    <div nz-col [nzSpan]="6">
      <input *ngIf="item._edit" nz-input [(ngModel)]="item._value" />
      <ng-container *ngIf="!item._edit">{{ item.value }}</ng-container>
    </div>
  </ng-template>
</st>


<!--新增字典项modal-->
<ng-template #addRef>

  <div class="modal-header">
    <div class="modal-title">新建字典项</div>
  </div>

  <sf #sf mode="edit" [schema]="schema" [ui]="ui" button="none">
    <div class="modal-footer">
      <button nz-button type="button" (click)="close()">关闭</button>
      <button nz-button type="submit" nzType="primary" (click)="save(sf.value)" [disabled]="!sf.valid" [nzLoading]="http.loading">
        保存
      </button>
    </div>
  </sf>

</ng-template>
